<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Mock Fintech Frontend</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 24px; }
    fieldset { margin-bottom: 24px; }
    #toast { padding: 10px; background: #eee; margin-top: 12px; min-height: 20px; }
    label { display:block; margin-top:6px; }
    input { width: 300px; padding:6px; }
    button { margin-top: 10px; padding:8px 12px; }
  </style>
  <script>
    function getApiBase() {
      const url = new URL(window.location.href);
      return url.searchParams.get('api') || 'http://localhost:8089';
    }
    async function createUser() {
      const name = document.getElementById('name').value.trim();
      const email = document.getElementById('email').value.trim();
      const accountType = document.getElementById('accountType').value.trim();
      if (!name || !email || !accountType) return show('Error: missing fields');
      const res = await fetch(getApiBase() + '/api/users', {
        method: 'POST',
        headers: { 'Content-Type':'application/json', 'Authorization':'Bearer demo-token' },
        body: JSON.stringify({ name, email, accountType })
      });
      if (res.status === 201) show('User created');
      else show('Error: ' + res.status);
    }
    async function createTx() {
      const userId = document.getElementById('userId').value.trim();
      const amount = document.getElementById('amount').value.trim();
      const type = document.getElementById('type').value.trim();
      const recipientId = document.getElementById('recipientId').value.trim();
      if (!userId || !amount || !type || !recipientId) return show('Error: missing fields');
      const res = await fetch(getApiBase() + '/api/transactions', {
        method: 'POST',
        headers: { 'Content-Type':'application/json', 'Authorization':'Bearer demo-token' },
        body: JSON.stringify({ userId, amount: parseFloat(amount), type, recipientId })
      });
      if (res.status === 201) show('Transaction created');
      else show('Error: ' + res.status);
    }
    function show(msg){ document.getElementById('toast').innerText = msg; }
  </script>
</head>
<body>
  <h1>Mock Fintech App</h1>

  <fieldset>
    <legend>User Registration</legend>
    <label>Name <input id="name" type="text"/></label>
    <label>Email <input id="email" type="email"/></label>
    <label>Account Type <input id="accountType" type="text" placeholder="premium/basic"/></label>
    <button id="registerBtn" onclick="createUser()">Register</button>
  </fieldset>

  <fieldset>
    <legend>Create Transaction</legend>
    <label>User ID <input id="userId" type="text" value="123"/></label>
    <label>Amount <input id="amount" type="number" step="0.01" value="100.50"/></label>
    <label>Type <input id="type" type="text" value="transfer"/></label>
    <label>Recipient ID <input id="recipientId" type="text" value="456"/></label>
    <button id="txBtn" onclick="createTx()">Create Transaction</button>
  </fieldset>

  <div id="toast"></div>
</body>
</html>
